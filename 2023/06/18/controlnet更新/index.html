<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  
    <meta name="keywords" content="AI架构师, ai infra, AI系统设计, AI系统优化, 机器学习, 深度学习, 大数据处理, 高性能AI架构, 可扩展AI系统, ChatGPT, Stable Diffusion, AI 绘画, 大模型">
  
  
    <meta name="description" content="这个网站旨在为AI架构师和对AI系统设计和优化感兴趣的人提供有价值的信息和资源。我们提供关于AI架构设计原理、机器学习和深度学习算法、大规模数据处理技术等方面的深入文章、案例研究和最佳实践指南。通过这些内容，我们希望帮助读者了解如何构建高性能、可扩展的AI架构，并提供实用的建议和方法来优化AI系统的性能和可靠性。无论是初学者还是有经验的专业人士，我们致力于为您提供有益的见解和实用的资源，以推动AI架构领域的发展和进步。">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <title>controlnet更新 |  AI架构 | AI系统基础架构设计与优化</title>
  
    <link rel="apple-touch-icon" sizes="57x57" href="/images/webclip/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/webclip/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/webclip/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/webclip/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/webclip/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/webclip/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/webclip/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/webclip/apple-touch-icon-180x180.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/images/webclip/apple-touch-icon-167x167.png">
  
  
    <link rel="shortcut icon" href="/images/favicon.ico">
  
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <main class="main">
    
	<header class="header">

	<div class="container">
		<nav class="navbar d-flex align-items-center">
			<a class="brand" href="/">
				<img class="logo lazyload" data-src="/images/brand.svg" alt="AI架构 | AI系统基础架构设计与优化" role="img">
			</a>
			<ul class="main-nav">
  
    
  <li class="nav-item ">
    <a class="nav-item-link" href="/">首页</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-item-link" href="/stories">案例</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-item-link" href="/archives">文章</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-item-link" href="/about">关于</a>
  </li>
  
</ul>
		</nav>
		<a id="mobile-nav-toggle">
			<span class="mobile-nav-toggle-bar"></span>
			<span class="mobile-nav-toggle-bar"></span>
			<span class="mobile-nav-toggle-bar"></span>
		</a>
	</div>
</header>

    <section>
      <div class="container">
  <article id="post-controlnet更新" class="article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  
  <div class="artcle-cover mb-5">
    
  </div>
  
  <div class="article-inner">
    
    <header class="article-header">
      
      
  
    <h1 class="article-title" itemprop="name">
      controlnet更新
    </h1>
  

      <div class="article-meta">
        <time class="text-gray" datetime="2023-06-17T23:50:57.000Z" itemprop="datePublished">
  2023-06-18
</time>
        
      </div>
      
    </header>
    
    <div class="article-entry" itemprop="articleBody">
      <p>在你没注意的时候ControlNet又更新了几次？ ControlNet更新总整理!! - YouTube<br><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=PTyWM15W7mg">https://www.youtube.com/watch?v=PTyWM15W7mg</a></p>
<p>Transcript:</p>
<p>（00：16） 大家好， 今天我们来更新一下信息 从上一篇tile模型更新后 ControlNet又用非常惊人的速度持续更新 今天我们来看看 到底又更新了些什么吧 在开始前说一下 我们拍这片的时候 Controlnet的版本是1.1.201版 那就开始吧 首先Controlnet最让人诟病的问题 就是模型跟预处理器非常的乱 现在的Controlnet预处理器 大概有40个以上 然后模型也有十几个 每一个选择都非常花时间 现在终于出现了非常方便的选择器 只需要在画面上 点选你要的内容 例如我选openpose 系统就会把openpose 能够对应的预处理器放上去 如果你有对应的模型 系统也会帮你把模型放好 非常的方便 </p>
<p>（01：19） 之后不用在预处理器之海迷航啦 接下来我们来说说 又增加了什么预处理器吧 第一个是Depth 他新增了一个leres++ 这个预处理器 对画面的细分度更高 可以针对每一个区域 做出更明确的分类 我们来看一下对照图 这是每一个预处理器 分别画出五张 从中间挑出三张比较好的结果 在我看来 细致度排名分别是这样子 什么意思呢 就是leres++ 对画面的还原度最高 不过主要还是看你的需求 再选择要使用的预处理器 接着我们看Tile Tile多了两个预处理器 过去有使用过tile应该会知道tile在放大动漫图像的时候会有颜色失真的问题 原本的颜色会跑掉很多还有一些报告指出某些部分会模糊通常是因为CFG不足导致 </p>
<p>（02：24） 所以目前tile针对这两个问题 做了对应的处理 经过调整 已经不需要提高CFG去控制Tile了 另外增加了两个预处理器 一个是tile_colorfix 他会针对颜色做补正 让颜色不会跑掉 另一个是tile_colorfix+sharp 这个是颜色补正加上锐利化 下方还有可以调整锐利度的滑块 这也是目前官方最推荐的预处理器 大家可以参考一下 目前在颜色修复上 我认为效果非常明显 但是要注意 colorfix会把原图的颜色锁死 是没有办法靠提词改变颜色的喔 再来是inpaint 在过去要使用inpaint模型的时候 通常我们会使用图生图的局部重绘 但是这样会有一个问题 我们得要上面涂一次屏蔽 下面ControlNet也图一次屏蔽 现在ControlNet不用这么麻烦了 </p>
<p>（03：27） 我们只需要在局部重绘的地方涂好屏蔽 下方ControlNet的部分 不需要放入任何东西 只需要选择局部重绘 ControlNet的启用打勾 直接按下生产就可以了 系统会自动把局部重绘的图像 送到ControlNet里面 就不用像过去的教学一样 上下都涂屏蔽了 而inpaint目前多了一个 inpaint_only预处理器 这个预处理器是用在 不使用webui的局部重绘功能时 如果你用inpaint_only预处理器 系统就不会重绘屏蔽以外的部分 最后是Reference 这是一个全新功能 他只有预处理器 不需要模型 Reference是一个概念简单 但是非常强大的功能 我们先来说一下原理 Reference的意思是参考 那他怎么参考的呢 其实就是将我们用来参考的图像 先送进SD的注意力层 等到我们的提词和参数进入的时候 做为参考 </p>
<p>（04：31） 得出相近的结果 目前Reference有三种 参考的方式有点不同 我们一样直接上对照图 Reference_only 读取的比较像是风格 Reference_adain 比较像是构图 最后是Reference_adain+attn 这是前面两个的结合 所以构图跟风格都会转移 这个功能有一个重点 他对参考图像的质量要求很高 如果你的图片是网页上面的照片 很容易产生质量不佳的状况 今天就介绍到这边（？ 等一下！！ 在视频快做完的时候 ControlNet又更新了4次 我们又有一个重大的更新 大家知道Adobe的Filefly 前阵子发布了 生成式填色的功能吧 不使用任何提词 就可以获得很棒的重绘结果 这个功能甚至可以轻松的向外绘制 前几天如果你问 SD能不能做一样的事 那答案是否定的 我们不使用任何提词 </p>
<p>（05：34） 就没有办法达成这个效果 而且结果并没有办法非常多样化 但就在前不久 ControlNet做到了 我们现在可以用SD 重现类似的成果 做法很简单 只要再文生图的地方使用inpaint 需要的只有高分辨率修复打勾 CFG官方建议小于5 接着打开ControlNet 模型选择局部重绘 下方的控制模式 改成ControlNet更重要 接着放上你想要填色的图片 这边要注意你的预处理器了 使用inpaint only 才不会改变屏蔽以外的图像 针对要填色的区域涂上屏蔽后 只要按下产生就可以了 如果你想要画面多做一些改变 只要加上少量的提 词 就能够获得很好的成果 那如果想要向外绘制呢 我们现在也可以用inpaint来达成了 只要把ControlNet的缩放模式 </p>
<p>（06：38） 改为调整大小并填充 接着调整你需要扩张的像素 按下一次产生 就会获得一张向外扩充的图片 接着再把这张图片 放入ControlNet中 把需要扩充的内容图上屏蔽 当然也可以再其他绘图软件中先做好 再放到SD里面 就不需要只是为了把图像扩张（口误） 而多执行一次 说不定你看到这部影片的时候 已经不需要这样做了 最后只要按下产生就完成了 今天真的就介绍到这边 各位看完这篇的时候 ControlNet可能又更新了好几次了 等过阵子 我们再来整理ControlNet又会了些什么吧 那就这样啦 下次见 掰</p>

    </div>
    <footer class="article-footer">
      
    </footer>
  </div>
  
  
    
<nav class="article-nav pt-4 mt-3" id="article-nav">
  
    <a href="/2023/06/20/sd-webui-%E5%8F%AA%E8%83%BD%E7%94%B1%E4%B8%80%E4%B8%AA%E7%94%A8%E6%88%B7%E5%90%8C%E6%97%B6%E4%BD%BF%E7%94%A8%E5%90%97%EF%BC%9F/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          sd-webui 只能由一个用户同时使用吗？
        
      </div>
    </a>
  
  
    <a href="/2023/06/17/Stable-Diffusion%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Stable Diffusion的工作原理</div>
    </a>
  
</nav>


  
</article>
</div>
    </section>
    <footer class="footer pt-5 mt-5">
  <div class="container">
    <div class="py-3">
      <div class="row justify-content-between">
        <div class="col-6">
          <img class="filter-gray mb-3 lazyload" height="40" data-src="/images/brand.svg" alt="AI架构 | AI系统基础架构设计与优化" role="img">
          <p class="mb-4">这个网站旨在为AI架构师和对AI系统设计和优化感兴趣的人提供有价值的信息和资源。我们提供关于AI架构设计原理、机器学习和深度学习算法、大规模数据处理技术等方面的深入文章、案例研究和最佳实践指南。通过这些内容，我们希望帮助读者了解如何构建高性能、可扩展的AI架构，并提供实用的建议和方法来优化AI系统的性能和可靠性。无论是初学者还是有经验的专业人士，我们致力于为您提供有益的见解和实用的资源，以推动AI架构领域的发展和进步。</p>
          <ul class="list-inline">
            
              <li class="list-inline-item">
                <a href="javascript:;">
                  <img 0="微信" src="/images/icons/contact_wechat.svg">
                </a>
              </li>
            
              <li class="list-inline-item">
                <a href="mailto:a@abc.com">
                  <img 0="邮箱" src="/images/icons/contact_email.svg">
                </a>
              </li>
            
          </ul>
        </div>
        <div class="col-4">
          <h5>友情链接</h5>
          <ul class="list-inline">
            
              <li class="list-inline-item">
                <a href="https://acorn.imaging.xin/" title="Acorn" target="_blank" rel="noopener">Acorn</a>
              </li>
            
              <li class="list-inline-item">
                <a href="https://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
              </li>
            
              <li class="list-inline-item">
                <a href="https://github.com/" title="GitHub" target="_blank" rel="noopener">GitHub</a>
              </li>
            
              <li class="list-inline-item">
                <a href="https://duoyu.wang/" title="To Base64" target="_blank" rel="noopener">To Base64</a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
    <hr class="hr" style="opacity: .25;">
    <div class="pt-3 pb-5">
      <ul class="list-inline mb-0 text-center">
        <li class="list-inline-item">&copy; 2023 AI架构 | AI系统基础架构设计与优化</li>
        
        <li class="list-inline-item">Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
        <li class="list-inline-item">Designer <a href="https://acorn.imaging.xin/" target="_blank">罗平</a></li>
      </ul>
    </div>
  </div>
</footer>
  </main>
  <div id="mobile-nav-dimmer"></div>
<div id="mobile-nav">
	<div id="mobile-nav-inner">
		<ul class="mobile-nav">
  
    
  <li class="nav-item ">
    <a class="nav-item-link" href="/">首页</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-item-link" href="/stories">案例</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-item-link" href="/archives">文章</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-item-link" href="/about">关于</a>
  </li>
  
</ul>
		
	</div>
</div>

  <script src="/libs/feather/feather.min.js"></script>
<script src="/libs/lazysizes/lazysizes.min.js"></script>

	<script src="/libs/tocbot/tocbot.min.js"></script>
	<script>
    tocbot.init({
      // Where to render the table of contents.
      tocSelector: '.js-toc',
      // Where to grab the headings to build the table of contents.
      contentSelector: '.js-toc-content',
      // Which headings to grab inside of the contentSelector element.
      headingSelector: 'h2, h3',
      // For headings inside relative or absolute positioned containers within content.
      hasInnerContainers: true,
    });
	</script>





<script src="/js/mobile-nav.js"></script>


<script src="/js/script.js"></script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-178892506-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-178892506-1');
</script>
</body>
</html>